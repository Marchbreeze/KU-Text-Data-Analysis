## 1. 한자 변환

- 한자-한글 변환의 필요성
    1. 텍스트 가독성
        - 과거에 쓰여진 텍스트일수록 한자 사용 비율이 높음
        - 한자에 익숙하지 않기 때문에 한자로 쓰여진 텍스트는 가독성이 낮아 이해하기 어려움
    2. 검색의 용이성
        - 원문의 한자 뿐만 아니라 한자음을 함께 색인하는 것이 바람직
        - 한자를 정확히 알지 못하는 경우에도 한글로 검색 가능

- 한자-한글 변환의 문제점
    1. 한자 변환의 호환성 문제
        - 동일한 한자가 음가에 따라 서로 다른 코드값을 가질 수 있음 (호환한자)
            - ex. 불(不) U+F967, 부(不) U+4E0D
        - 실제로 사용자가 입력할 때, 이 음가와 일치하지 않는 한자를 입력할 수 있는 문제도 존재
        - OCR을 통한 텍스트 변환 시 호환한자들이 존재할 수 있음
    2. 검색
        - 호환 한자가 여러 코드값을 가지기 때문에, 검색 시 한자를 둘 다 고려해야 하는 문제가 발생
        - 검색 엔진은 이를 정규화해서 처리해야
    3. 유니코드 권장 사항
        - 호환 한자는 기존 문자 집합과 왕복 변환(round-trip)을 위해 사용하도록 권장
    
- 호환한자
    1. 동형이음 한자
        - 자형이 같지만 소리가 다른 한자
        - ex. 易 : 무역(역) & 용이(이)
    2. 두음법칙
        - 단어의 첫머리에 올 때 발음이 달라지는 현상
        - ex. 儀 : 윤리(윤) & 패륜(륜)
        - 예외 : 단어의 머리에 나오지 않더라도 두음법칙을 적용
        - ex. 不 : 불능, 부정, 부당
    3. 동자이음어
        - 규칙적으로 판단하기 어려운 경우
        - ex. 刺殺 : 자살, 척살

## 2. 한자-한글 변환 시스템

### (1) 문자 정규화

- 문자 정규화
    - **텍스트 처리의 일관성**을 위해 한글과 한자를 포함한 문자를 정규화하여 하나의 대표형으로 통일하는 작업
    - ex. U+F914 樂(낙) → U+6A02 樂(락)
    - but 한글 독음이 변경됨
    
    ```python
    import unicodedata
    text = "樂"
    normalized = unicodedata.normalize('NFC', text)
    ```
    

- 정규화 결과 처리
    
    ![2024-10-19_14-10-49.jpg](https://prod-files-secure.s3.us-west-2.amazonaws.com/edfd69d1-6c01-4d0c-9269-1bae8a4e3915/6ff9d653-a454-47c9-b7cc-68cebaa2bdbd/2024-10-19_14-10-49.jpg)
    
    - 대부분의 호환한자가 통합한자로 변환
    - ‘한중일 통합한자 확장 B’ 영역 : 한글 음가가 정의되지 않은 한자
        
        → 105개 중 네이버 한자사전에 음가가 정의된 101개의 문자를 한자-한글 테이블에 추가
        

### (2) 테이블 & 사전 구축

1. 한자-한글 테이블 구축
    - 국사편찬위원회의 ‘검색엔진용 한자음가 사전’을 기반으로 한자-한글 대응 정보를 추출
    - 총 27,967개의 한자음 정보 수록
    - 각 한자의 대표음 뿐만 아니라 음가 전체를 이용하여 생성
        - 복수 음을 가진 한자 수 : 4,463자
        
        ![2024-10-19_14-17-43.jpg](https://prod-files-secure.s3.us-west-2.amazonaws.com/edfd69d1-6c01-4d0c-9269-1bae8a4e3915/8fc1cfe3-436f-4194-b483-f1e8523c04bd/2024-10-19_14-17-43.jpg)
        

1. 한자어-한글 사전 구축
    - **한자만으로는 정확한 음가를 알기 어려움**
        
        **→ 문맥에 따라 정확한 발음을 결정하기 위해서 한자-한글 사전이 필요**
        
    - 우리말샘
        - 471,841개의 한자-한글 쌍을 제공
        - 사이시옷 등 예외 단어 추가

### (3) 한자-한글 변환 과정

![2024-10-19_14-19-50.jpg](https://prod-files-secure.s3.us-west-2.amazonaws.com/edfd69d1-6c01-4d0c-9269-1bae8a4e3915/c48f1190-4139-42c0-998d-a446cfce7c5d/2024-10-19_14-19-50.jpg)

- 최장일치 분석 (Maxmatch)
    - 사전 기반 분석 방법 중 가장 단순한 방법
    - 주어진 문장에서 가장 긴 단어를 사전에서 찾아내는 방법 → 긴 단어를 먼저 찾기 때문에 반복적으로 단어를 분석할 필요가 없음
    - 알고리즘
        1. 첫 문자부터 사전에 등록된 가장 긴 단어를 찾음
        2. 단어가 발견되면 다음 문자부터 최장 단어를 다시 검색
        3. 단어가 발견되지 않으면 한 글자씩 이동
        4. 위 과정을 문장 끝까지 반복
    - 단점
        - 문맥을 고려하지 않고 가장 긴 단어를 우선적으로 찾기 때문에, 잘못된 결과가 나올 수 있음
        - ex. “thetabledownthere” → “Theta bled own there”

- 두음법칙에 위배되는 한글 음독 결과를 필터링
    - 不 : 다음에 오는 한글 음절의 자음이 ‘ㄷ’이나 ‘ㅈ’일 경우 ‘부’, 아니면 ‘불’
    - 렬(烈, 列), 률(律, 率) : 단어의 첫머리에 나오지 않더라도, 모음 또는 ‘ㄴ’ 받침 뒤에 올 때에는 ‘열’, ‘율’

- 변환 결과 예시
    
    ![2024-10-19_15-12-11.jpg](https://prod-files-secure.s3.us-west-2.amazonaws.com/edfd69d1-6c01-4d0c-9269-1bae8a4e3915/49f60650-8783-42ee-80f4-8a7aacafe071/2024-10-19_15-12-11.jpg)
    
    ![2024-10-19_15-12-29.jpg](https://prod-files-secure.s3.us-west-2.amazonaws.com/edfd69d1-6c01-4d0c-9269-1bae8a4e3915/1127e12e-0ede-441a-bf20-2d148f2c4cba/2024-10-19_15-12-29.jpg)
    

### (4) **한자-한글 병기 형태소 분석**

- 변환 과정
    
    ![2024-10-19_15-20-37.jpg](https://prod-files-secure.s3.us-west-2.amazonaws.com/edfd69d1-6c01-4d0c-9269-1bae8a4e3915/57f11f83-821f-4a17-94b1-64b2487e576a/2024-10-19_15-20-37.jpg)
